buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.4'
        classpath 'net.sf.proguard:proguard-gradle:5.3.2'
    }
}

apply plugin: 'com.github.johnrengelman.shadow'

// Target java 6 so we can explode in their face when they use it
sourceCompatibility = 1.6
targetCompatibility = 1.6

description = 'SonarPet'
dependencies {
    compile project(':core')
}

shadowJar {
    configurations = [project.configurations.compile]

    relocate "org.slf4j", "net.techcable.sonarpet.libs.slf4j"
    relocate "org.objectweb.asm", "net.techcable.sonarpet.libs.asm"
    relocate "com.zaxxer.hikari", "net.techcable.sonarpet.libs.hikari"
    // DSH's stuff
    relocate "com.dsh105.commodus", "net.techcable.sonarpet.libs.commodus"
    relocate "com.dsh105.powermessage", "net.techcable.sonarpet.libs.powermessage"
    relocate "com.captainbern.reflection", "net.techcable.sonarpet.libs.captainbern.reflection"
    relocate "com.captainbern.minecraft", "net.techcable.sonarpet.libs.captainbern.minecraft"
    // Freak dependencies we probably shouldn't even have
    relocate "com.jolbox", "net.techcable.sonarpet.libs.jolbox"
    // Why do we need gson if it's alreay in the craftbukkit jar?
    relocate "com.google.gson", "net.techcable.sonarpet.libs.gson"
}

build.dependsOn(shadowJar)
